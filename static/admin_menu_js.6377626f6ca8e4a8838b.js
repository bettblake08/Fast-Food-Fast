!function(t){var e={};function s(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/assets/",s(s.s=210)}({1:function(t,e,s){"use strict";s.d(e,"b",function(){return n}),s.d(e,"a",function(){return a});const n="https://fast-food-fast-bb.herokuapp.com",a=`${n}/api/v1`},134:function(t,e,s){t.exports=s.p+"d47c0b2480371f5b5261e25f5938755a.png"},135:function(t,e,s){t.exports=s.p+"d5d9e2b9c600ebcd4e98640b15ed2b0f.png"},136:function(t,e,s){t.exports=s.p+"75bb1dfba7409341bee1f971a19e88cd.png"},137:function(t,e,s){t.exports=s.p+"e707c04257c1833ee8e26bc0499e4256.png"},146:function(t,e,s){"use strict";e.a=class{constructor(t){this._state={view:0};let e=document.createElement("div"),s=[];e.classList.add("views"),t.views.forEach(t=>{let n=document.createElement("div");n.classList.add("view--disabled"),n.appendChild(t.getViewComponent()),s.push(n),e.appendChild(n)}),this._components={main:e,views:s},0!=t.views.length&&this.updateView(0)}get state(){return this._state}set state(t){this._state=t}get components(){return this._components}set components(t){this._components=t}addView(t){let e=document.createElement("div");e.classList.add("view--disabled"),e.appendChild(t.getViewComponent()),this.components.views.push(e),this.components.main.appendChild(e)}updateView(t){console.log("View updated :"+t);let e=this.components.views[this.state.view],s=this.components.views[t];e.classList.replace("view--active","view--disabled"),s.classList.replace("view--disabled","view--active"),this.state.view=t}getViewsComponent(){return this.components.main}}},147:function(t,e,s){"use strict";e.a=class{constructor(t){void 0==t.action&&(t.action=(()=>{})),this._state={status:t.status},this._props=t;let e=this,s=document.createElement("div"),n=document.createElement("label"),a=document.createElement("select"),i=document.createElement("div"),o=document.createElement("div"),r=document.createElement("option"),c=[];n.setAttribute("htmlFor",t.name),n.classList.add("f_h2"),n.innerHTML=t.label,i.classList.add(`${t.class}__comment--active`),i.classList.add("f_comment_1"),o.classList.add(`${t.class}__error--disabled`),o.classList.add("f_comment_1"),r.innerHTML=void 0==t.placeholder?"-- Select --":t.placeholder,r.value="",a.setAttribute("id",t.name),a.classList.add(t.textClass),a.appendChild(r),a.addEventListener("focusout",()=>{e.updateStatus()}),t.options.forEach(t=>{let e=document.createElement("option");e.value=t.value,e.innerHTML=t.text,c.push(e),a.appendChild(e)}),s.classList.add(t.class),s.classList.add(this.getSelectClass(t.class,t.status)),s.appendChild(n),s.appendChild(a),s.appendChild(i),s.appendChild(o),this._components={main:s,inputLabel:n,inputSelect:a,inputComment:i,inputErrorComment:o,inputOptions:c},this._props=t}get state(){return this._state}set state(t){this._state=t}get components(){return this._components}set components(t){this._components=t}get props(){return this._props}set props(t){this._props=t}updateStatus(){""==this.getInputValue()?this.displayError("No item selected!"):this.setStatus(6)}getDropDownInput(){return this.components.main}getInputValue(){return this.components.inputSelect.value}isValid(){return 6==this.state.status}init(){let t=this.props.parent.state;t.dropdowns.push(this),this.props.parent.state=t}displayError(t,e=3e3){let s=this.components.inputComment,n=this.components.inputErrorComment;s.classList.replace(`${this.props.class}__comment--active`,`${this.props.class}__comment--disabled`),n.innerHTML=t,n.classList.replace(`${this.props.class}__error--disabled`,`${this.props.class}__error--active`),this.setStatus(1,e),setTimeout(()=>{s.classList.replace(`${this.props.class}__comment--disabled`,`${this.props.class}__comment--active`),n.innerHTML="",n.classList.replace(`${this.props.class}__error--active`,`${this.props.class}__error--disabled`)},e)}setStatus(t,e=3e3){let s=this.state,n=this.components,a=this.props,i=this,o=this.getSelectClass(a.class,s.status),r=this.getSelectClass(a.class,t);n.main.classList.replace(o,r),1==t||2==t?setTimeout(()=>{let e=this.getSelectClass(a.class,t),o=this.getSelectClass(a.class,a.status);n.main.classList.replace(e,o),s.status=a.status,i.state=s},e):(s.status=t,i.state=s)}getSelectClass(t,e){switch(e){case 0:return`${t}`;case 1:case 5:return`${t}--fail`;case 2:case 6:return`${t}--success`;case 3:return`${t}--loading`;case 4:return`${t}--warning`}}focus(){this.components.main.focus()}}},2:function(t,e,s){"use strict";s.d(e,"b",function(){return a}),s.d(e,"a",function(){return i});var n=s(1);function a(t){let e=JSON.parse(localStorage.getItem("tokens"));fetch(`${n.a}/token/refresh`,{method:"GET",headers:{Authorization:`Bearer ${e.refresh_token}`}}).then(e=>{if(201==e.status)return e.json();t.onFailure()}).then(s=>{void 0!=s&&(e.access_token=s.access_token,localStorage.setItem("tokens",JSON.stringify(e)),t.onSuccess())})}function i(){let t=JSON.parse(localStorage.getItem("tokens"));return null==t?"":t.access_token}},210:function(t,e,s){t.exports=s(211)},211:function(t,e,s){"use strict";s.r(e);var n=s(146),a=s(1),i=s(2),o=s(3),r=s(134),c=s.n(r),d=s(135),l=s.n(d),u=s(136),p=s.n(u),m=s(137),h=s.n(m),_=s(8),g=s(147);class C{constructor(t){this._state={total:0,quantity:0,item:t.item};let e=document.createElement("div"),s=document.createElement("div"),n=new Image,a=document.createElement("div"),i=document.createElement("div");switch(t.item.c_id){case 1:n.src=c.a;break;case 2:n.src=l.a;break;case 3:n.src=p.a;break;case 4:n.src=h.a}n.alt=t.item.name,s.classList.add("menuItem__image"),s.appendChild(n),a.classList.add("menuItem__name"),a.classList.add("f_normal"),a.innerHTML=t.item.name,i.classList.add("menuItem__price"),i.classList.add("f_normal"),i.innerHTML="KSH "+t.item.price/100,e.classList.add("menuItem"),e.appendChild(s),e.appendChild(a),e.appendChild(i),this._component={main:e,itemImage:s,itemImageImg:n,itemName:a,itemPrice:i};let o=t.parent.state;o.menuItems.push(this),t.parent.state=o}get state(){return this._state}set state(t){this._state=t}get component(){return this._component}set component(t){this._component=t}getOrderItem(){return this.component.main}}let f=new n.a({views:[]}),v=new class{constructor(t){this._state={buttons:[],menuItems:[]};let e=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),l=document.createElement("div"),u=document.createElement("div"),p=document.createElement("div"),m=document.createElement("div"),h=document.createElement("div"),_=document.createElement("div");i.classList.add("menu__title"),i.classList.add("f_h1"),i.innerHTML="Menu";let g=new o.a({class:"btn_1",textClass:"f_button_1",label:"Add Item",parent:this,status:0,action:()=>{t.parent.updateView(1)}});g.init(),a.classList.add("menu__topBar__button"),a.appendChild(g.getButton()),n.classList.add("menu__topBar__buttons"),n.appendChild(a),s.classList.add("menu__topBar"),s.appendChild(i),s.appendChild(n),c.classList.add("menu__category"),c.innerHTML='<h2 class="f_h2">Breakfast</h2>',d.classList.add("menu__category__content"),c.appendChild(d),l.classList.add("menu__category"),l.innerHTML='<h2 class="f_h2">MainMeal</h2>',u.classList.add("menu__category__content"),l.appendChild(u),p.classList.add("menu__category"),p.innerHTML='<h2 class="f_h2">Snacks</h2>',m.classList.add("menu__category__content"),p.appendChild(m),h.classList.add("menu__category"),h.innerHTML='<h2 class="f_h2">Drinks</h2>',_.classList.add("menu__category__content"),h.appendChild(_),r.appendChild(c),r.appendChild(l),r.appendChild(p),r.appendChild(h),e.classList.add("menu"),e.appendChild(s),e.appendChild(r),this._components={main:e,menuTopbar:s,menuTopbarButtons:n,menuAddItemButton:a,menuTitle:i,menuContent:r,menuCategoryBreakfast:c,menuCategoryBreakfastContent:d,menuCategoryMainMeal:l,menuCategoryMainMealContent:u,menuCategorySnacks:p,menuCategorySnacksContent:m,menuCategoryDrinks:h,menuCategoryDrinksContent:_}}get state(){return this._state}set state(t){this._state=t}get components(){return this._components}set components(t){this._components=t}setMenuError(t){let e=this.components,s=`<div class="menu__content__error f_h2">${t}</div>`;e.menuCategoryBreakfastContent.innerHTML=s,e.menuCategoryMainMealContent.innerHTML=s,e.menuCategorySnacksContent.innerHTML=s,e.menuCategoryDrinksContent.innerHTML=s}updateMenu(t){let e=this,s=[[],[],[],[]];if(0==t.length)return void this.setMenuError("No items in this category. Please add something!");t.forEach(t=>{let n=new C({item:t,parent:e});s[t.c_id-1].push(n.getOrderItem())});let n='<div class="menu__content__error f_h2">No items in this category. Please add something!</div>';0==s[0].length?this.components.menuCategoryBreakfastContent.innerHTML=n:s[0].forEach(t=>{this.components.menuCategoryBreakfastContent.appendChild(t)}),0==s[1].length?this.components.menuCategoryMainMealContent.innerHTML=n:s[1].forEach(t=>{this.components.menuCategoryMainMealContent.appendChild(t)}),0==s[2].length?this.components.menuCategorySnacksContent.innerHTML=n:s[2].forEach(t=>{this.components.menuCategorySnacksContent.appendChild(t)}),0==s[3].length?this.components.menuCategoryDrinksContent.innerHTML=n:s[3].forEach(t=>{this.components.menuCategoryDrinksContent.appendChild(t)})}fetchMenu(){let t=this;fetch(`${a.a}/menu`).then(e=>{if(200==e.status)return e.json();t.setMenuError("Failed to fetch menu. Please try again later!")}).then(e=>{void 0!=e&&t.updateMenu(e.content)})}getViewComponent(){return this.components.main}}({parent:f}),L=new class{constructor(t){this._state={buttons:[],textInputs:[],dropdowns:[]};let e=this,s=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div");n.classList.add("addMenuItem__title"),n.classList.add("f_h1"),n.innerHTML="Add new menu item";let l=new _.a({parent:this,name:"itemName",label:"Name",placeholder:"Eg. Cheese burger",class:"text_input",textClass:"f_input_1",type:"text",status:0,test:t=>0==t.length?{status:!1,message:"Item name field is empty."}:t.length>120?{status:!1,message:"Item name is too long. Please input an item name less than 30 characters."}:{status:!0}}),u=new _.a({parent:this,name:"itemPrice",label:"Price",placeholder:"Eg. 1400.45. Price in Kenyan Shillings",class:"text_input",textClass:"f_input_1",type:"text",status:0,test:t=>0==t.length?{status:!1,message:"Item price field is empty."}:/^([0-9]+(\.[0-9]+)?|Infinity)$/.test(t)?{status:!0}:{status:!1,message:"Item price field is invalid. Please provide a positive float number!"}});l.init(),u.init(),i.classList.add("addMenuItem__name"),r.classList.add("addMenuItem__price"),i.appendChild(l.getInput()),r.appendChild(u.getInput()),c.classList.add("addMenuItem__category");let p=new g.a({class:"dropdown",textClass:"f_input_dd_1",label:"Menu Category",name:"menuCategory",parent:e,status:0,options:[{value:1,text:"Breakfast"},{value:2,text:"Main Meal"},{value:3,text:"Snacks"},{value:4,text:"Drinks"}]});p.init(),c.appendChild(p.getDropDownInput()),a.classList.add("addMenuItem__form"),a.appendChild(i),a.appendChild(r),a.appendChild(c),d.classList.add("addMenuItem__buttons");let m=document.createElement("div"),h=document.createElement("div");m.classList.add("addMenuItem__button"),h.classList.add("addMenuItem__button");let C=new o.a({class:"btn_1",textClass:"f_button_2",label:"Save",parent:e,status:0,action:()=>{e.addNewMenuItem()}}),f=new o.a({class:"btn_1",textClass:"f_button_2",label:"Cancel",parent:e,status:0,action:()=>{t.parent.updateView(0)}});C.init(),f.init(),m.appendChild(C.getButton()),h.appendChild(f.getButton()),d.appendChild(h),d.appendChild(m),s.classList.add("addMenuItem"),s.appendChild(n),s.appendChild(a),s.appendChild(d),this._components={main:s,addMenuItemTitle:n,addMenuItemForm:a,addMenuItemName:i,addMenuItemPrice:r,addMenuItemCategory:c}}get state(){return this._state}set state(t){this._state=t}get components(){return this._components}set components(t){this._components=t}addNewMenuItem(){let t=this.state.textInputs,e=this.state.dropdowns,s=this,n=t.find(t=>2!=t.state.status);void 0==n?(e[0].isValid()||e[0].focus(),fetch(`${a.a}/menu`,{method:"POST",body:JSON.stringify({name:t[0].getInputValue(),price:parseFloat(t[1].getInputValue()),c_id:e[0].getInputValue()}),headers:{Authorization:`Bearer ${Object(i.a)()}`,"Content-Type":"application/json"}}).then(t=>{switch(t.status){case 201:return t.json();case 401:Object(i.b)({onSuccess:()=>{s.addNewMenuItem()},onFailure:()=>{window.location.href=a.b+"/admin/login"}});break;case 403:window.location.href=a.b+"/admin/login"}s.state.buttons[0].setStatus(1)}).then(t=>{void 0!=t&&(s.state.buttons[0].setStatus(2),window.location.href=a.b+"/admin/menu")})):n.focus()}getViewComponent(){return this.components.main}}({parent:f});f.addView(v),f.addView(L),f.updateView(0),document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".content").appendChild(f.getViewsComponent()),v.fetchMenu()})},3:function(t,e,s){"use strict";e.a=class{constructor(t){this._state={status:t.status},this._props=t;let e=document.createElement("button");e.setAttribute("type","button"),e.classList.add(t.textClass),e.classList.add(this.getButtonClass(t.class,t.status)),e.innerHTML=t.label,e.addEventListener("click",t.action),this._component={main:e}}get state(){return this._state}set state(t){this._state=t}get component(){return this._component}set component(t){this._component=t}get props(){return this._props}set props(t){this._props=t}getButton(){return this.component.main}init(){let t=this.props.parent.state;t.buttons.push(this),this.props.parent.state=t}setStatus(t,e=3e3){let s=this.state,n=this.component,a=this.props,i=this,o=this.getButtonClass(a.class,s.status),r=this.getButtonClass(a.class,t);n.main.classList.replace(o,r),1==t||2==t?setTimeout(()=>{let e=this.getButtonClass(a.class,t),o=this.getButtonClass(a.class,a.status);n.main.classList.replace(e,o),s.status=a.status,i.state=s},e):(s.status=t,i.state=s)}getButtonClass(t,e){switch(e){case 0:return`${t}`;case 1:case 5:return`${t}--fail`;case 2:case 6:return`${t}--success`;case 3:return`${t}--loading`;case 4:return`${t}--warning`}}}},8:function(t,e,s){"use strict";e.a=class{constructor(t){this._state={inputValue:"",status:void 0==t.status?0:t.status,test:void 0==t.test?()=>!0:t.test},this._component={},this._props=t,this._parent=t.parent;const e=document.createElement("div"),s=document.createElement("input"),n=document.createElement("label"),a=document.createElement("div"),i=document.createElement("div");i.classList.add("errorComment--disabled"),i.classList.add(`${t.class}__error`),i.classList.add("f_comment_1"),a.classList.add(`${t.class}__comment--active`),a.classList.add("f_comment_1"),a.innerHTML=void 0==t.comment?"":t.comment,n.setAttribute("htmlFor",t.name),n.innerHTML=t.label,s.setAttribute("type",t.type),s.setAttribute("id",t.name),s.setAttribute("placeholder",t.placeholder),s.classList.add(t.textClass),s.addEventListener("focusout",()=>{this.testInput()}),e.classList.add("has-float-label"),e.classList.add(t.textClass),e.classList.add(this.getInputClass(t.class,t.status)),e.appendChild(s),e.appendChild(n),e.appendChild(a),e.appendChild(i),this._component={main:e,textInput:s,textInputLabel:n,textInputComment:a,textInputErrorComment:i}}get state(){return this._state}set state(t){this._state=t}get component(){return this._component}set component(t){this._component=t}get props(){return this._props}set props(t){this._props=t}init(){let t=this.props,e=t.parent.state;e.textInputs.push(this),t.parent.state=e,this.props=t}testInput(){let t=this.state.test(this.component.textInput.value);return t.status?(this.updateInputStatus(2),this.closeErrorDisplay()):(this.setErrorMessage(t.message),this.displayError(5e3),this.updateInputStatus(1)),t.status}setErrorMessage(t){let e=this.state;e.errorMsg=t,this.state=e}displayError(t=3e3){console.log("Displaying error: "+this.state.errorMsg);let e=this.component,s=this.state,n=e.textInputErrorComment,a=this;n.classList.replace("errorComment--disabled","errorComment--active"),n.innerHTML=s.errorMsg,setTimeout(()=>{a.closeErrorDisplay(),a.setErrorMessage("")},t)}closeErrorDisplay(){let t=this.component.textInputErrorComment;t.classList.contains("errorComment--active")&&(t.classList.replace("errorComment--active","errorComment--disabled"),t.innerHTML="")}updateInputStatus(t){let e=this.component.main,s=this.state;e.classList.replace(this.getInputClass(this.props.class,this.state.status),this.getInputClass(this.props.class,t)),s.status=t,this.state=s}getInputClass(t,e){switch(e){case 0:return`${t}--normal`;case 1:return`${t}--fail`;case 2:return`${t}--success`;case 3:return`${t}--loading`;case 4:return`${t}--warning`}}getInput(){return this.component.main}focus(){this.component.textInput.focus()}getInputValue(){return this.component.textInput.value}}}});